<!DOCTYPE html>
<html>
  <head>
    <title>Get Firebase ID Token</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  </head>
  <body>
    <h2>Sign in with Google to get your Firebase ID Token</h2>
    <button onclick="signIn()">Sign in with Google</button>
    <pre id="token"></pre>
    <script>
      // TODO: Replace with your Firebase config
      const firebaseConfig = {
        apiKey: "AIzaSyBNWFpeG2N2i0lxlpJIcqs8Q5o3j0sKSvo",
        authDomain: "remnant-migration-app.firebaseapp.com",
        projectId: "remnant-migration-app",
        appId: "1:1003787337288:web:35976ba8fae4770a9be27d",
      };
      firebase.initializeApp(firebaseConfig);

      function signIn() {
        const provider = new firebase.auth.GoogleAuthProvider();
        firebase.auth().signInWithPopup(provider)
          .then((result) => {
            return result.user.getIdToken();
          })
          .then((idToken) => {
            document.getElementById('token').textContent = idToken;
            alert("Copy this token and paste it into your Streamlit app:\n\n" + idToken);
          })
          .catch((error) => {
            alert(error.message);
          });
      }
    </script>
  </body>
</html>